 <!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>مولد الكلمات العربية التسلسلي - محمد البادلي المغربي</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="مولد الكلمات العربية المتقدم - توليد وتخزين جميع التركيبات الممكنة للحروف العربية. تطوير محمد البادلي المغربي">
    <meta name="keywords" content="مولد كلمات عربية، كلمات عربية، تسلسل حروف، محمد البادلي، مغربي، لغة عربية، حوسبة لغوية">
    <meta name="author" content="محمد البادلي المغربي">
    <meta name="robots" content="index, follow">
    <meta name="language" content="Arabic">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="مولد الكلمات العربية التسلسلي - محمد البادلي المغربي">
    <meta property="og:description" content="أداة متقدمة لتوليد جميع التركيبات الممكنة للحروف العربية بطريقة تسلسلية منظمة">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="ar_SA">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="مولد الكلمات العربية التسلسلي">
    <meta name="twitter:description" content="أداة متقدمة لتوليد الكلمات العربية - تطوير محمد البادلي المغربي">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#5D5CDE">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="مولد الكلمات العربية">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="مولد الكلمات العربية">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://yourwebsite.com/">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iOCIgZmlsbD0iIzVENUNERSIvPgo8dGV4dCB4PSIxNiIgeT0iMjIiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxOCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7YpzwvdGV4dD4KPC9zdmc+">
    
    <!-- Web App Manifest -->
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogItin2YXZiNmE2K/Yp9mE2YPZhNmF2KfYqiDYp9mE2LnYsdio2YrYqSDYp9mE2KrYs9mE2LPZhNmKIC0g2YXYrdmF2K8g2KfZhNio2KfYr9mE2Yog2KfZhNmF2LrYsdio2YoiLAogICJzaG9ydF9uYW1lIjogItin2YXZiNmE2K8g2KfZhNmD2YTZhdin2KoiLAogICJkZXNjcmlwdGlvbiI6ICLYo9iv2KfYqSDZhdiq2YLYr9mF2Kkg2YTYqtmI2YTZitmK2K8g2KfZhNmD2YTZhdin2Kog2KfZhNi52LHYqNmK2KkiLAogICJzdGFydF91cmwiOiAiLi8iLAogICJkaXNwbGF5IjogInN0YW5kYWxvbmUiLAogICJvcmllbnRhdGlvbiI6ICJwb3J0cmFpdCIsCiAgInRoZW1lX2NvbG9yIjogIiM1RDVDREUiLAogICJiYWNrZ3JvdW5kX2NvbG9yIjogIiNGRkZGRkYiLAogICJjYXRlZ29yaWVzIjogWyJlZHVjYXRpb24iLCAidXRpbGl0aWVzIiwgInRvb2xzIiwgImFyYWJpYyJdLAogICJsYW5nIjogImFyIiwKICAiaWNvbnMiOiBbCiAgICB7CiAgICAgICJzcmMiOiAiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCM2FXUjBhRDBpTVRreUlpQm9aV2xuYUhROUlqRTVNaUlnZG1sbGQwSnZlRDBpTUNBd0lERTVNaUF4T1RJaUlHWnBiR3c5SW01dmJtVWlJSGh0Ykc1elBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHlNREF3TDNOMlp5SStDbHh5WldOMElIZHBaSFJvUFNJeE9USWlJR2hsYVdkb2REMGlNVGt5SW1CTyJBaUlHWnBiR3c5SWlNMVJEVkRSRVVpTHo0S1BIUmxlSFFnZUQwaU9UQWlJSGs5SWpFeU1DSWdabTl1ZEMxbVlXMXBiSGs5SWtGeWFXRnNJaUJtYjI1MExYTnBlbVU5SWpjd0lpQm1iMjUwTFhkbGFXZG9kRDBpWW05c1pDSWdabWxzYkQwaWQyaHBkR1VpSUhSbGVIUXRZVzVqYUc5eVBTSnRhV1JrYkdVaVBpNVpkend2ZEdWNGRENEtQSFJsZUhRZ2VEMGlPVEFpSUhrOUlqVXdJaUJtYjI1MExXWmhiV2xzZVQwaVFYSnBZV3dpSUdadmJuUXRjMmw2WlQwaU1qQWlJR1pwYkd3OUluZG9hWFJsSWlCMFpYaDBMV0Z1WTJodmNqMGliV2xrWkd4bElpNTJaRDNjN2RHVjRkRDRLUEM5emRtYysif==",CiAgICAgICJzaXplcyI6ICIxOTJ4MTkyIiwKICAgICAgInR5cGUiOiAiaW1hZ2Uvc3ZnK3htbCIKICAgIH0KICBdCn0=">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#5D5CDE',
                        morocco: '#C1272D'
                    }
                }
            }
        }
    </script>
    
    <!-- Google Analytics (اختياري) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'GA_MEASUREMENT_ID');
    </script>
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "مولد الكلمات العربية التسلسلي",
        "description": "أداة متقدمة لتوليد جميع التركيبات الممكنة للحروف العربية بطريقة تسلسلية",
        "url": "https://yourwebsite.com",
        "author": {
            "@type": "Person",
            "name": "محمد البادلي المغربي",
            "nationality": "المغرب"
        },
        "inLanguage": "ar",
        "applicationCategory": "EducationalApplication",
        "operatingSystem": "Any",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        }
    }
    </script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@400;500;600;700&display=swap');
        
        body {
            font-family: 'Noto Sans Arabic', sans-serif;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        .word-card {
            transition: all 0.2s ease;
            font-size: 16px;
            min-height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            -webkit-tap-highlight-color: rgba(93, 92, 222, 0.3);
            position: relative;
        }
        
        .word-card:hover, .word-card:active {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(93, 92, 222, 0.15);
        }
        
        .word-card.saved {
            background: linear-gradient(45deg, #5D5CDE, #7C3AED);
            color: white;
            border-color: #5D5CDE;
        }
        
        .save-btn {
            position: absolute;
            top: 2px;
            left: 2px;
            background: rgba(93, 92, 222, 0.8);
            color: white;
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 10px;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.2s;
            z-index: 10;
        }
        
        .word-card:hover .save-btn {
            opacity: 1;
        }
        
        .word-card.saved .save-btn {
            background: rgba(255, 255, 255, 0.3);
            opacity: 1;
        }
        
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #5D5CDE;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .progress-bar {
            transition: width 0.3s ease;
        }
        
        .developer-signature {
            background: linear-gradient(135deg, #C1272D, #FF6B35);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: bold;
        }
        
        .morocco-flag {
            background: linear-gradient(to right, #C1272D 0%, #C1272D 100%);
            position: relative;
        }
        
        .morocco-flag::before {
            content: '★';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #006233;
            font-size: 12px;
        }
        
        .nav-tab {
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }
        
        .nav-tab.active {
            border-bottom-color: #5D5CDE;
            color: #5D5CDE;
        }
        
        .collection-card {
            transition: all 0.2s ease;
            cursor: pointer;
        }
        
        .collection-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        /* Footer styling */
        .footer {
            background: linear-gradient(135deg, #5D5CDE, #7C3AED);
            margin-top: 4rem;
        }
        
        /* Mobile optimizations */
        @media (max-width: 640px) {
            .word-card {
                font-size: 14px;
                min-height: 40px;
                padding: 8px;
            }
        }
        
        /* Print styles */
        @media print {
            .no-print {
                display: none !important;
            }
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 min-h-screen">
    <!-- Header with Developer Info -->
    <header class="bg-gradient-to-r from-primary to-purple-600 text-white shadow-lg">
        <div class="max-w-7xl mx-auto p-4 md:p-6">
            <div class="flex items-center justify-between mb-4">
                <div class="flex items-center space-x-3 space-x-reverse">
                    <div class="w-8 h-5 morocco-flag rounded"></div>
                    <div>
                        <h1 class="text-xl md:text-3xl font-bold">مولد الكلمات العربية المتقدم</h1>
                        <p class="text-sm md:text-base text-purple-100">أداة شاملة لتوليد وحفظ الكلمات العربية بالترتيب التسلسلي</p>
                    </div>
                </div>
                <div class="text-right">
                    <p class="text-sm text-purple-100">تطوير و برمجة</p>
                    <p class="font-bold text-lg developer-signature text-white">محمد البادلي المغربي</p>
                    <p class="text-xs text-purple-200">🇲🇦 المملكة المغربية</p>
                </div>
            </div>
            
            <!-- Navigation Tabs -->
            <div class="flex space-x-1 space-x-reverse">
                <button class="nav-tab active px-4 py-2 font-semibold" data-tab="generator">المولد</button>
                <button class="nav-tab px-4 py-2 font-semibold" data-tab="saved">المجموعات المحفوظة</button>
                <button class="nav-tab px-4 py-2 font-semibold" data-tab="about">حول المطور</button>
                <button class="nav-tab px-4 py-2 font-semibold" data-tab="help">المساعدة</button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto p-4 md:p-6">
        <!-- Generator Tab -->
        <div id="generator-tab" class="tab-content">
            <!-- Quick Stats Banner -->
            <div class="bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-4 mb-6 border border-blue-200 dark:border-blue-800">
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                    <div>
                        <div class="text-xl font-bold text-blue-600">28</div>
                        <div class="text-sm text-blue-500">حرف عربي</div>
                    </div>
                    <div>
                        <div class="text-xl font-bold text-green-600" id="quickTotal">0</div>
                        <div class="text-sm text-green-500">إجمالي متوقع</div>
                    </div>
                    <div>
                        <div class="text-xl font-bold text-purple-600" id="quickSaved">0</div>
                        <div class="text-sm text-purple-500">مجموعة محفوظة</div>
                    </div>
                    <div>
                        <div class="text-xl font-bold text-orange-600">∞</div>
                        <div class="text-sm text-orange-500">إمكانيات لا محدودة</div>
                    </div>
                </div>
            </div>
            
            <!-- Controls -->
            <div class="bg-white dark:bg-gray-800 rounded-xl p-4 md:p-6 mb-6 md:mb-8 shadow-sm">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                    <div>
                        <label class="block text-sm font-medium mb-2">الطول الأقصى للكلمة</label>
                        <select id="maxLength" class="w-full px-4 py-3 text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-transparent">
                            <option value="1">حرف واحد (28 كلمة)</option>
                            <option value="2">حرفين (812 كلمة)</option>
                            <option value="3" selected>ثلاثة أحرف (22,736 كلمة)</option>
                            <option value="4">أربعة أحرف (636,608 كلمة)</option>
                            <option value="5">خمسة أحرف (17.8 مليون كلمة)</option>
                            <option value="6">ستة أحرف (498.7 مليون كلمة)</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium mb-2">عدد الكلمات لكل دفعة</label>
                        <select id="batchSize" class="w-full px-4 py-3 text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-transparent">
                            <option value="100">100 كلمة</option>
                            <option value="500" selected>500 كلمة</option>
                            <option value="1000">1,000 كلمة</option>
                            <option value="2000">2,000 كلمة</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium mb-2">اسم المجموعة</label>
                        <input type="text" id="collectionName" placeholder="مثال: كلمات ثلاثية" class="w-full px-4 py-3 text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-transparent">
                    </div>
                    
                    <div class="flex items-end">
                        <button id="generateBtn" class="w-full bg-primary hover:bg-purple-600 text-white font-semibold py-3 px-4 rounded-lg transition-colors duration-200 shadow-md">
                            🚀 بدء التوليد
                        </button>
                    </div>
                </div>
                
                <!-- Progress Bar -->
                <div class="mb-4">
                    <div class="flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-2">
                        <span id="currentProgress">اختر الإعدادات واضغط "بدء التوليد"</span>
                        <span id="progressPercent">0%</span>
                    </div>
                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3">
                        <div id="progressBar" class="progress-bar bg-gradient-to-r from-primary to-purple-600 h-3 rounded-full" style="width: 0%"></div>
                    </div>
                </div>
                
                <div class="flex items-center justify-between flex-wrap gap-2">
                    <div id="progressInfo" class="text-sm text-gray-600 dark:text-gray-400"></div>
                    <div class="flex space-x-2 space-x-reverse">
                        <button id="pauseBtn" class="hidden bg-yellow-600 hover:bg-yellow-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200">
                            ⏸️ إيقاف مؤقت
                        </button>
                        <button id="saveCollectionBtn" class="hidden bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200">
                            💾 حفظ المجموعة
                        </button>
                        <button id="downloadBtn" class="hidden bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200">
                            📥 تحميل النتائج
                        </button>
                    </div>
                </div>
            </div>

            <!-- Statistics -->
            <div id="statsContainer" class="hidden grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4">
                    <div class="text-xl md:text-2xl font-bold text-blue-600 dark:text-blue-400" id="totalWords">0</div>
                    <div class="text-sm text-blue-600 dark:text-blue-400">إجمالي الكلمات المولدة</div>
                </div>
                <div class="bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4">
                    <div class="text-xl md:text-2xl font-bold text-green-600 dark:text-green-400" id="displayedWords">0</div>
                    <div class="text-sm text-green-600 dark:text-green-400">الكلمات المعروضة</div>
                </div>
                <div class="bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4">
                    <div class="text-xl md:text-2xl font-bold text-purple-600 dark:text-purple-400" id="savedWordsCount">0</div>
                    <div class="text-sm text-purple-600 dark:text-purple-400">الكلمات المحفوظة</div>
                </div>
                <div class="bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4">
                    <div class="text-xl md:text-2xl font-bold text-orange-600 dark:text-orange-400" id="currentLength">0</div>
                    <div class="text-sm text-orange-600 dark:text-orange-400">طول الكلمة الحالي</div>
                </div>
            </div>

            <!-- Loading Indicator -->
            <div id="loadingIndicator" class="hidden text-center py-8">
                <div class="loading-spinner mx-auto mb-4"></div>
                <p class="text-gray-600 dark:text-gray-400">جاري التوليد... يرجى الانتظار</p>
            </div>

            <!-- Words Container -->
            <div id="wordsContainer" class="grid grid-cols-3 sm:grid-cols-5 md:grid-cols-7 lg:grid-cols-9 xl:grid-cols-12 gap-2 md:gap-3">
            </div>

            <!-- Load More Button -->
            <div id="loadMoreContainer" class="hidden text-center mt-6 md:mt-8">
                <button id="loadMoreBtn" class="bg-gray-600 hover:bg-gray-700 text-white font-semibold py-3 px-8 rounded-lg transition-colors duration-200">
                    📄 تحميل المزيد
                </button>
            </div>
        </div>

        <!-- Saved Collections Tab -->
        <div id="saved-tab" class="tab-content hidden">
            <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold">📚 المجموعات المحفوظة</h2>
                    <div class="flex space-x-2 space-x-reverse">
                        <button id="exportAllBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors">
                            📤 تصدير الكل
                        </button>
                        <button id="clearAllBtn" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors">
                            🗑️ مسح الكل
                        </button>
                    </div>
                </div>
                <div id="collectionsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <!-- Collections will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Help Tab -->
        <div id="help-tab" class="tab-content hidden">
            <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm">
                <h2 class="text-2xl font-bold mb-6">❓ دليل الاستخدام</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-xl font-bold mb-4 text-primary">🎯 كيفية الاستخدام</h3>
                        <div class="space-y-4">
                            <div class="p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                <h4 class="font-semibold mb-2">1️⃣ اختيار الإعدادات</h4>
                                <p class="text-sm text-gray-600 dark:text-gray-400">حدد الطول الأقصى للكلمة وعدد الكلمات في كل دفعة</p>
                            </div>
                            <div class="p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                <h4 class="font-semibold mb-2">2️⃣ بدء التوليد</h4>
                                <p class="text-sm text-gray-600 dark:text-gray-400">اضغط "بدء التوليد" ومشاهدة الكلمات تظهر تدريجياً</p>
                            </div>
                            <div class="p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                <h4 class="font-semibold mb-2">3️⃣ حفظ الكلمات</h4>
                                <p class="text-sm text-gray-600 dark:text-gray-400">انقر على 💾 لحفظ كلمات مفردة أو احفظ المجموعة كاملة</p>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h3 class="text-xl font-bold mb-4 text-green-600">⚡ المميزات الرئيسية</h3>
                        <div class="space-y-3">
                            <div class="flex items-center space-x-3 space-x-reverse">
                                <span class="text-2xl">🔄</span>
                                <span>توليد تسلسلي منظم للكلمات</span>
                            </div>
                            <div class="flex items-center space-x-3 space-x-reverse">
                                <span class="text-2xl">💾</span>
                                <span>حفظ المجموعات محلياً في المتصفح</span>
                            </div>
                            <div class="flex items-center space-x-3 space-x-reverse">
                                <span class="text-2xl">📱</span>
                                <span>يعمل على جميع الأجهزة</span>
                            </div>
                            <div class="flex items-center space-x-3 space-x-reverse">
                                <span class="text-2xl">🌙</span>
                                <span>دعم الوضع المظلم</span>
                            </div>
                            <div class="flex items-center space-x-3 space-x-reverse">
                                <span class="text-2xl">⚡</span>
                                <span>أداء عالي ومعالجة سريعة</span>
                            </div>
                            <div class="flex items-center space-x-3 space-x-reverse">
                                <span class="text-2xl">📥</span>
                                <span>تصدير البيانات بصيغة TXT</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="mt-8 p-6 bg-gradient-to-r from-primary/10 to-purple-600/10 rounded-lg border border-primary/20">
                    <h3 class="text-lg font-bold mb-3">💡 نصائح للاستخدام الأمثل</h3>
                    <ul class="space-y-2 text-sm">
                        <li>• ابدأ بأطوال قصيرة (1-3 أحرف) لفهم النظام</li>
                        <li>• استخدم أسماء واضحة للمجموعات المحفوظة</li>
                        <li>• يمكنك إيقاف التوليد مؤقتاً واستكماله لاحقاً</li>
                        <li>• انقر على أي كلمة لنسخها إلى الحافظة</li>
                        <li>• استخدم وضع ملء الشاشة للحصول على تجربة أفضل</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- About Developer Tab -->
        <div id="about-tab" class="tab-content hidden">
            <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm">
                <div class="text-center mb-8">
                    <div class="w-32 h-32 mx-auto mb-6 bg-gradient-to-br from-primary to-purple-600 rounded-full flex items-center justify-center shadow-lg">
                        <span class="text-4xl text-white font-bold">م.ب</span>
                    </div>
                    <h2 class="text-3xl font-bold mb-3">محمد البادلي المغربي</h2>
                    <p class="text-lg text-gray-600 dark:text-gray-400 mb-4">مطور تطبيقات الويب متخصص في التقنيات العربية والحوسبة اللغوية</p>
                    <div class="flex items-center justify-center space-x-3 space-x-reverse mb-6">
                        <div class="w-8 h-5 morocco-flag rounded"></div>
                        <span class="text-morocco font-semibold text-lg">🇲🇦 المملكة المغربية</span>
                    </div>
                    
                    <!-- Contact Info -->
                    <div class="flex justify-center space-x-4 space-x-reverse mb-8">
                        <div class="bg-gray-100 dark:bg-gray-700 px-4 py-2 rounded-lg">
                            <span class="text-sm">📧 للتواصل المهني</span>
                        </div>
                        <div class="bg-gray-100 dark:bg-gray-700 px-4 py-2 rounded-lg">
                            <span class="text-sm">💼 متاح للمشاريع</span>
                        </div>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                    <div>
                        <h3 class="text-xl font-bold mb-4 text-primary">🚀 حول هذا التطبيق</h3>
                        <div class="space-y-3 text-gray-600 dark:text-gray-400">
                            <p>• مولد متقدم للكلمات العربية التسلسلية</p>
                            <p>• خوارزمية محسنة لتوليد جميع التركيبات الممكنة</p>
                            <p>• نظام حفظ وإدارة متطور للمجموعات</p>
                            <p>• تصميم متجاوب يعمل على جميع الأجهزة</p>
                            <p>• تقنية PWA للعمل بدون اتصال بالإنترنت</p>
                            <p>• دعم كامل للغة العربية والوضع المظلم</p>
                        </div>
                    </div>
                    
                    <div>
                        <h3 class="text-xl font-bold mb-4 text-green-600">⚙️ التقنيات المستخدمة</h3>
                        <div class="space-y-3 text-gray-600 dark:text-gray-400">
                            <p>• HTML5, CSS3, JavaScript ES6+</p>
                            <p>• TailwindCSS للتصميم المتجاوب</p>
                            <p>• IndexedDB لتخزين البيانات محلياً</p>
                            <p>• Web Workers للمعالجة المتوازية</p>
                            <p>• Service Workers للتخزين المؤقت</p>
                            <p>• Progressive Web App (PWA)</p>
                        </div>
                    </div>
                </div>
                
                <div class="mb-8">
                    <h3 class="text-xl font-bold mb-4 text-purple-600">🎯 الهدف من التطبيق</h3>
                    <div class="bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-purple-900/20 dark:to-indigo-900/20 p-6 rounded-lg border border-purple-200 dark:border-purple-800">
                        <p class="text-gray-700 dark:text-gray-300 leading-relaxed">
                            هذا التطبيق مخصص لخدمة الباحثين والأكاديميين والمهتمين باللغة العربية والحوسبة اللغوية. 
                            يهدف إلى توفير أداة شاملة ومتقدمة لتوليد جميع التركيبات الممكنة للحروف العربية بطريقة منظمة وعلمية، 
                            مما يساعد في الدراسات اللغوية وتطوير المعاجم وتطبيقات معالجة اللغة الطبيعية.
                        </p>
                    </div>
                </div>
                
                <div class="text-center">
                    <div class="bg-gradient-to-r from-primary/10 to-purple-600/10 p-6 rounded-lg border border-primary/20">
                        <p class="text-lg font-semibold text-primary mb-2">شكراً لاستخدام التطبيق! 🙏</p>
                        <p class="text-sm text-gray-600 dark:text-gray-400">
                            "تم تطوير هذا التطبيق بعناية لخدمة مجتمع اللغة العربية والباحثين في مجال الحوسبة اللغوية"
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer text-white py-8 mt-12">
        <div class="max-w-7xl mx-auto px-4 md:px-6">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h3 class="font-bold text-lg mb-3">مولد الكلمات العربية</h3>
                    <p class="text-purple-100 text-sm">أداة متقدمة لتوليد وإدارة الكلمات العربية بطريقة تسلسلية منظمة</p>
                </div>
                <div>
                    <h3 class="font-bold text-lg mb-3">التطوير</h3>
                    <p class="text-purple-100 text-sm">محمد البادلي المغربي</p>
                    <p class="text-purple-100 text-sm">🇲🇦 المملكة المغربية</p>
                </div>
                <div>
                    <h3 class="font-bold text-lg mb-3">الإصدار</h3>
                    <p class="text-purple-100 text-sm">الإصدار 2.0 - 2024</p>
                    <p class="text-purple-100 text-sm">جميع الحقوق محفوظة</p>
                </div>
            </div>
            <div class="border-t border-purple-400/30 mt-8 pt-6 text-center">
                <p class="text-purple-100 text-sm">
                    © 2024 محمد البادلي المغربي - تطبيق مولد الكلمات العربية التسلسلي
                </p>
            </div>
        </div>
    </footer>

    <!-- Custom Modal Container -->
    <div id="modalContainer"></div>

    <script>
        // Arabic letters in order
        const arabicLetters = [
            'ا', 'ب', 'ت', 'ث', 'ج', 'ح', 'خ', 'د', 'ذ', 'ر', 'ز', 'س', 'ش', 'ص', 'ض', 'ط', 'ظ', 'ع', 'غ', 'ف', 'ق', 'ك', 'ل', 'م', 'ن', 'ه', 'و', 'ي'
        ];
        
        let allWords = [];
        let displayedWords = [];
        let savedWords = new Set();
        let currentIndex = 0;
        let isGenerating = false;
        let isPaused = false;
        let generationProgress = { current: 0, total: 0 };
        let db;

        // Dark mode detection
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });

        // Initialize IndexedDB
        async function initDB() {
            return new Promise((resolve, reject) => {
                const request = indexedDB.open('ArabicWordsDB_MohammedAlbadli', 2);
                
                request.onerror = () => reject(request.error);
                request.onsuccess = () => {
                    db = request.result;
                    resolve(db);
                };
                
                request.onupgradeneeded = (event) => {
                    const db = event.target.result;
                    
                    // Create collections store
                    if (!db.objectStoreNames.contains('collections')) {
                        const collectionsStore = db.createObjectStore('collections', { keyPath: 'id', autoIncrement: true });
                        collectionsStore.createIndex('name', 'name', { unique: false });
                        collectionsStore.createIndex('date', 'date', { unique: false });
                    }
                    
                    // Create words store
                    if (!db.objectStoreNames.contains('words')) {
                        const wordsStore = db.createObjectStore('words', { keyPath: 'id', autoIncrement: true });
                        wordsStore.createIndex('word', 'word', { unique: false });
                        wordsStore.createIndex('collectionId', 'collectionId', { unique: false });
                    }
                };
            });
        }

        // Update quick stats when max length changes
        function updateQuickStats() {
            const maxLength = parseInt(document.getElementById('maxLength').value);
            const total = calculateTotalWords(maxLength);
            document.getElementById('quickTotal').textContent = total.toLocaleString();
        }

        // Save collection to IndexedDB
        async function saveCollection(name, words, maxLength) {
            if (!db) await initDB();
            
            const transaction = db.transaction(['collections', 'words'], 'readwrite');
            const collectionsStore = transaction.objectStore('collections');
            const wordsStore = transaction.objectStore('words');
            
            // Save collection metadata
            const collection = {
                name: name || `مجموعة كلمات ${maxLength} أحرف`,
                maxLength: maxLength,
                wordCount: words.length,
                date: new Date().toISOString(),
                author: 'محمد البادلي المغربي',
                version: '2.0'
            };
            
            const collectionRequest = collectionsStore.add(collection);
            
            return new Promise((resolve, reject) => {
                collectionRequest.onsuccess = () => {
                    const collectionId = collectionRequest.result;
                    
                    // Save words
                    const wordPromises = words.map(word => {
                        return new Promise((resolveWord) => {
                            const wordRequest = wordsStore.add({
                                word: word,
                                collectionId: collectionId,
                                length: word.length
                            });
                            wordRequest.onsuccess = () => resolveWord();
                        });
                    });
                    
                    Promise.all(wordPromises).then(() => {
                        resolve(collectionId);
                    });
                };
                
                collectionRequest.onerror = () => reject(collectionRequest.error);
            });
        }

        // Load collections from IndexedDB
        async function loadCollections() {
            if (!db) await initDB();
            
            const transaction = db.transaction(['collections'], 'readonly');
            const store = transaction.objectStore('collections');
            const request = store.getAll();
            
            return new Promise((resolve, reject) => {
                request.onsuccess = () => {
                    const collections = request.result;
                    document.getElementById('quickSaved').textContent = collections.length;
                    resolve(collections);
                };
                request.onerror = () => reject(request.error);
            });
        }

        // Load words from collection
        async function loadWordsFromCollection(collectionId) {
            if (!db) await initDB();
            
            const transaction = db.transaction(['words'], 'readonly');
            const store = transaction.objectStore('words');
            const index = store.index('collectionId');
            const request = index.getAll(collectionId);
            
            return new Promise((resolve, reject) => {
                request.onsuccess = () => resolve(request.result.map(item => item.word));
                request.onerror = () => reject(request.error);
            });
        }

        // Delete collection
        async function deleteCollection(collectionId) {
            if (!db) await initDB();
            
            const transaction = db.transaction(['collections', 'words'], 'readwrite');
            const collectionsStore = transaction.objectStore('collections');
            const wordsStore = transaction.objectStore('words');
            
            // Delete collection
            collectionsStore.delete(collectionId);
            
            // Delete associated words
            const wordsIndex = wordsStore.index('collectionId');
            const wordsRequest = wordsIndex.getAll(collectionId);
            
            wordsRequest.onsuccess = () => {
                const words = wordsRequest.result;
                words.forEach(word => {
                    wordsStore.delete(word.id);
                });
            };
        }

        // Tab navigation
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', (e) => {
                const targetTab = e.target.dataset.tab;
                
                // Update active tab
                document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                e.target.classList.add('active');
                
                // Show/hide content
                document.querySelectorAll('.tab-content').forEach(content => content.classList.add('hidden'));
                document.getElementById(targetTab + '-tab').classList.remove('hidden');
                
                // Load collections if switching to saved tab
                if (targetTab === 'saved') {
                    loadCollectionsDisplay();
                }
            });
        });

        // Generate words sequentially from length 1 to maxLength
        function* generateSequentialWords(maxLength) {
            let totalGenerated = 0;
            
            for (let length = 1; length <= maxLength; length++) {
                const totalForLength = Math.pow(arabicLetters.length, length);
                
                for (let index = 0; index < totalForLength; index++) {
                    if (isPaused) {
                        yield null;
                        continue;
                    }
                    
                    const word = generateWordFromIndex(index, length);
                    totalGenerated++;
                    
                    yield {
                        word: word,
                        length: length,
                        index: index,
                        totalForLength: totalForLength,
                        totalGenerated: totalGenerated
                    };
                }
            }
        }
        
        // Convert index to word for given length
        function generateWordFromIndex(index, length) {
            let word = '';
            let temp = index;
            
            for (let i = 0; i < length; i++) {
                word = arabicLetters[temp % arabicLetters.length] + word;
                temp = Math.floor(temp / arabicLetters.length);
            }
            
            return word;
        }
        
        // Calculate total words for all lengths up to maxLength
        function calculateTotalWords(maxLength) {
            let total = 0;
            for (let length = 1; length <= maxLength; length++) {
                total += Math.pow(arabicLetters.length, length);
            }
            return total;
        }

        // Generate words sequentially
        async function generateWords() {
            if (isGenerating) return;
            
            isGenerating = true;
            isPaused = false;
            
            const generateBtn = document.getElementById('generateBtn');
            const pauseBtn = document.getElementById('pauseBtn');
            const loadingIndicator = document.getElementById('loadingIndicator');
            const wordsContainer = document.getElementById('wordsContainer');
            const statsContainer = document.getElementById('statsContainer');
            const saveCollectionBtn = document.getElementById('saveCollectionBtn');
            const downloadBtn = document.getElementById('downloadBtn');
            const progressBar = document.getElementById('progressBar');
            const progressPercent = document.getElementById('progressPercent');
            const currentProgress = document.getElementById('currentProgress');
            
            generateBtn.disabled = true;
            generateBtn.innerHTML = '⏳ جاري التوليد...';
            pauseBtn.classList.remove('hidden');
            loadingIndicator.classList.remove('hidden');
            wordsContainer.innerHTML = '';
            statsContainer.classList.remove('hidden');
            saveCollectionBtn.classList.add('hidden');
            downloadBtn.classList.add('hidden');
            
            const maxLength = parseInt(document.getElementById('maxLength').value);
            const batchSize = parseInt(document.getElementById('batchSize').value);
            
            try {
                allWords = [];
                displayedWords = [];
                currentIndex = 0;
                
                const totalExpected = calculateTotalWords(maxLength);
                generationProgress.total = totalExpected;
                generationProgress.current = 0;
                
                document.getElementById('totalWords').textContent = totalExpected.toLocaleString();
                document.getElementById('displayedWords').textContent = '0';
                document.getElementById('currentLength').textContent = '1';
                
                const generator = generateSequentialWords(maxLength);
                let batch = [];
                let lastUpdateTime = Date.now();
                
                while (true) {
                    if (isPaused) {
                        await new Promise(resolve => setTimeout(resolve, 100));
                        continue;
                    }
                    
                    const result = generator.next();
                    
                    if (result.done) {
                        if (batch.length > 0) {
                            addWordBatch(batch);
                            batch = [];
                        }
                        break;
                    }
                    
                    if (result.value === null) continue;
                    
                    const wordData = result.value;
                    allWords.push(wordData.word);
                    batch.push(wordData);
                    generationProgress.current = wordData.totalGenerated;
                    
                    const now = Date.now();
                    if (batch.length >= batchSize || now - lastUpdateTime > 100) {
                        addWordBatch(batch);
                        batch = [];
                        
                        const percent = Math.round((generationProgress.current / generationProgress.total) * 100);
                        progressBar.style.width = percent + '%';
                        progressPercent.textContent = percent + '%';
                        currentProgress.textContent = `توليد كلمات بطول ${wordData.length} حرف`;
                        document.getElementById('currentLength').textContent = wordData.length;
                        document.getElementById('displayedWords').textContent = allWords.length.toLocaleString();
                        
                        lastUpdateTime = now;
                        await new Promise(resolve => setTimeout(resolve, 1));
                    }
                }
                
                progressBar.style.width = '100%';
                progressPercent.textContent = '100%';
                currentProgress.textContent = '✅ اكتمل التوليد بنجاح!';
                saveCollectionBtn.classList.remove('hidden');
                downloadBtn.classList.remove('hidden');
                
                showCustomAlert(`🎉 تم توليد ${allWords.length.toLocaleString()} كلمة بنجاح!`);
                
            } catch (error) {
                showCustomAlert('❌ حدث خطأ أثناء التوليد: ' + error.message);
            } finally {
                isGenerating = false;
                generateBtn.disabled = false;
                generateBtn.innerHTML = '🚀 بدء التوليد';
                pauseBtn.classList.add('hidden');
                loadingIndicator.classList.add('hidden');
            }
        }
        
        // Add batch of words to display
        function addWordBatch(batch) {
            const wordsContainer = document.getElementById('wordsContainer');
            
            batch.forEach(wordData => {
                const wordCard = document.createElement('div');
                wordCard.className = 'word-card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-2 md:p-3 text-center font-medium shadow-sm hover:shadow-md cursor-pointer fade-in';
                wordCard.innerHTML = `
                    <button class="save-btn" onclick="toggleSaveWord(event, '${wordData.word}')">💾</button>
                    ${wordData.word}
                `;
                wordCard.title = `طول: ${wordData.length} | ترقيم: ${(wordData.index + 1).toLocaleString()} | انقر للنسخ`;
                wordCard.onclick = (e) => {
                    if (e.target.classList.contains('save-btn')) return;
                    copyToClipboard(wordData.word);
                };
                wordsContainer.appendChild(wordCard);
            });
        }

        // Toggle save word
        function toggleSaveWord(event, word) {
            event.stopPropagation();
            const wordCard = event.target.parentElement;
            
            if (savedWords.has(word)) {
                savedWords.delete(word);
                wordCard.classList.remove('saved');
                event.target.textContent = '💾';
            } else {
                savedWords.add(word);
                wordCard.classList.add('saved');
                event.target.textContent = '✅';
            }
            
            document.getElementById('savedWordsCount').textContent = savedWords.size;
        }
        
        // Pause/Resume generation
        function togglePause() {
            isPaused = !isPaused;
            const pauseBtn = document.getElementById('pauseBtn');
            
            if (isPaused) {
                pauseBtn.innerHTML = '▶️ استئناف';
                pauseBtn.className = pauseBtn.className.replace('bg-yellow-600 hover:bg-yellow-700', 'bg-green-600 hover:bg-green-700');
            } else {
                pauseBtn.innerHTML = '⏸️ إيقاف مؤقت';
                pauseBtn.className = pauseBtn.className.replace('bg-green-600 hover:bg-green-700', 'bg-yellow-600 hover:bg-yellow-700');
            }
        }

        // Save current collection
        async function saveCurrentCollection() {
            const collectionName = document.getElementById('collectionName').value;
            const maxLength = document.getElementById('maxLength').value;
            
            if (allWords.length === 0) {
                showCustomAlert('⚠️ لا توجد كلمات للحفظ!');
                return;
            }
            
            try {
                const collectionId = await saveCollection(collectionName, allWords, maxLength);
                showCustomAlert(`✅ تم حفظ المجموعة بنجاح! (${allWords.length.toLocaleString()} كلمة)`);
                document.getElementById('collectionName').value = '';
                loadCollections(); // Update quick stats
            } catch (error) {
                showCustomAlert('❌ حدث خطأ أثناء الحفظ: ' + error.message);
            }
        }

        // Load and display collections
        async function loadCollectionsDisplay() {
            try {
                const collections = await loadCollections();
                const container = document.getElementById('collectionsContainer');
                
                if (collections.length === 0) {
                    container.innerHTML = `
                        <div class="col-span-full text-center py-12 text-gray-500">
                            <div class="text-6xl mb-4">📚</div>
                            <p class="text-xl mb-2">لا توجد مجموعات محفوظة</p>
                            <p class="text-sm">ابدأ بتوليد الكلمات وحفظها في المجموعات</p>
                        </div>
                    `;
                    return;
                }
                
                container.innerHTML = collections.map(collection => `
                    <div class="collection-card bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg p-4" onclick="viewCollection(${collection.id})">
                        <div class="flex justify-between items-start mb-3">
                            <h3 class="font-bold text-lg truncate">${collection.name}</h3>
                            <button class="text-red-500 hover:text-red-700 text-xl" onclick="event.stopPropagation(); confirmDeleteCollection(${collection.id})" title="حذف المجموعة">🗑️</button>
                        </div>
                        <div class="space-y-2 text-sm text-gray-600 dark:text-gray-400">
                            <p>📊 ${collection.wordCount.toLocaleString()} كلمة</p>
                            <p>📏 حتى ${collection.maxLength} أحرف</p>
                            <p>📅 ${new Date(collection.date).toLocaleDateString('ar-SA')}</p>
                            <p class="text-primary font-medium">👨‍💻 ${collection.author}</p>
                            ${collection.version ? `<p class="text-xs text-gray-500">v${collection.version}</p>` : ''}
                        </div>
                    </div>
                `).join('');
                
            } catch (error) {
                showCustomAlert('❌ حدث خطأ أثناء تحميل المجموعات: ' + error.message);
            }
        }

        // View collection details
        async function viewCollection(collectionId) {
            try {
                const words = await loadWordsFromCollection(collectionId);
                showCollectionModal(words);
            } catch (error) {
                showCustomAlert('❌ حدث خطأ أثناء تحميل الكلمات: ' + error.message);
            }
        }

        // Show collection modal
        function showCollectionModal(words) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg max-w-6xl w-full max-h-[90vh] flex flex-col">
                    <div class="p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center">
                        <h3 class="text-xl font-bold">📚 كلمات المجموعة (${words.length.toLocaleString()})</h3>
                        <div class="flex space-x-2 space-x-reverse">
                            <button class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded transition-colors" onclick="downloadWordsAsTxt(${JSON.stringify(words).replace(/"/g, '&quot;')})">📥 تحميل TXT</button>
                            <button class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded transition-colors" onclick="this.closest('.fixed').remove()">❌ إغلاق</button>
                        </div>
                    </div>
                    <div class="p-6 overflow-auto flex-1">
                        <div class="grid grid-cols-6 sm:grid-cols-8 md:grid-cols-12 lg:grid-cols-16 gap-2">
                            ${words.map(word => `
                                <div class="bg-gray-100 dark:bg-gray-700 rounded p-2 text-center text-sm cursor-pointer hover:bg-primary hover:text-white transition-colors font-medium" onclick="copyToClipboard('${word}')" title="انقر للنسخ: ${word}">
                                    ${word}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
            document.getElementById('modalContainer').appendChild(modal);
        }

        // Download words as TXT
        function downloadWordsAsTxt(words) {
            const header = `مولد الكلمات العربية التسلسلي
تطوير: محمد البادلي المغربي 🇲🇦
عدد الكلمات: ${words.length.toLocaleString()}
تاريخ التصدير: ${new Date().toLocaleDateString('ar-SA')}
الوقت: ${new Date().toLocaleTimeString('ar-SA')}
الموقع: arabic-words-generator

${'='.repeat(50)}

`;
            const content = header + words.join('\n');
            const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `arabic_words_collection_mohammed_albadli_${new Date().toISOString().slice(0, 10)}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showCustomAlert('✅ تم تحميل الملف بنجاح!');
        }

        // Export all collections
        async function exportAllCollections() {
            try {
                const collections = await loadCollections();
                if (collections.length === 0) {
                    showCustomAlert('⚠️ لا توجد مجموعات للتصدير!');
                    return;
                }
                
                let allData = `مولد الكلمات العربية التسلسلي - تصدير شامل
تطوير: محمد البادلي المغربي 🇲🇦
عدد المجموعات: ${collections.length}
تاريخ التصدير: ${new Date().toLocaleDateString('ar-SA')}
الوقت: ${new Date().toLocaleTimeString('ar-SA')}

${'='.repeat(80)}

`;
                
                for (const collection of collections) {
                    const words = await loadWordsFromCollection(collection.id);
                    allData += `
📚 اسم المجموعة: ${collection.name}
📊 عدد الكلمات: ${collection.wordCount.toLocaleString()}
📏 الطول الأقصى: ${collection.maxLength} أحرف
📅 تاريخ الإنشاء: ${new Date(collection.date).toLocaleDateString('ar-SA')}
👨‍💻 المطور: ${collection.author}

الكلمات:
${words.join(', ')}

${'-'.repeat(60)}
`;
                }
                
                const blob = new Blob([allData], { type: 'text/plain;charset=utf-8' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = `arabic_words_all_collections_mohammed_albadli_${new Date().toISOString().slice(0, 10)}.txt`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showCustomAlert('✅ تم تصدير جميع المجموعات بنجاح!');
                
            } catch (error) {
                showCustomAlert('❌ حدث خطأ أثناء التصدير: ' + error.message);
            }
        }

        // Confirm delete collection
        function confirmDeleteCollection(collectionId) {
            showConfirmDialog('🗑️ هل أنت متأكد من حذف هذه المجموعة؟', async () => {
                try {
                    await deleteCollection(collectionId);
                    loadCollectionsDisplay();
                    showCustomAlert('✅ تم حذف المجموعة بنجاح');
                } catch (error) {
                    showCustomAlert('❌ حدث خطأ أثناء الحذف: ' + error.message);
                }
            });
        }

        // Clear all collections
        function clearAllCollections() {
            showConfirmDialog('🚨 هل أنت متأكد من حذف جميع المجموعات؟<br><small>هذا الإجراء لا يمكن التراجع عنه نهائياً!</small>', async () => {
                try {
                    if (!db) await initDB();
                    
                    const transaction = db.transaction(['collections', 'words'], 'readwrite');
                    const collectionsStore = transaction.objectStore('collections');
                    const wordsStore = transaction.objectStore('words');
                    
                    await collectionsStore.clear();
                    await wordsStore.clear();
                    
                    loadCollectionsDisplay();
                    loadCollections(); // Update quick stats
                    showCustomAlert('✅ تم حذف جميع المجموعات بنجاح');
                } catch (error) {
                    showCustomAlert('❌ حدث خطأ أثناء الحذف: ' + error.message);
                }
            });
        }

        // Copy to clipboard
        async function copyToClipboard(text) {
            try {
                await navigator.clipboard.writeText(text);
                if ('vibrate' in navigator) {
                    navigator.vibrate(50);
                }
                showCustomAlert(`✅ تم نسخ الكلمة: ${text}`);
            } catch (err) {
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showCustomAlert(`✅ تم نسخ الكلمة: ${text}`);
            }
        }

        // Download results
        function downloadResults() {
            const maxLength = document.getElementById('maxLength').value;
            const collectionName = document.getElementById('collectionName').value || `مجموعة كلمات ${maxLength} أحرف`;
            const timestamp = new Date().toISOString().slice(0, 10);
            
            const content = `مولد الكلمات العربية التسلسلي
تطوير: محمد البادلي المغربي 🇲🇦
اسم المجموعة: ${collectionName}
الطول الأقصى: ${maxLength} أحرف
عدد الكلمات: ${allWords.length.toLocaleString()}
تاريخ التوليد: ${new Date().toLocaleDateString('ar-SA')}
الوقت: ${new Date().toLocaleTimeString('ar-SA')}
الموقع: arabic-words-generator

${'='.repeat(80)}

${allWords.join('\n')}

${'='.repeat(80)}
© 2024 محمد البادلي المغربي - جميع الحقوق محفوظة`;

            const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `arabic_words_${maxLength}chars_mohammed_albadli_${timestamp}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showCustomAlert('📥 تم تحميل الملف بنجاح!');
        }

        // Custom alert function
        function showCustomAlert(message) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg max-w-sm w-full mx-4 text-center animate-pulse">
                    <p class="text-gray-700 dark:text-gray-300 mb-4 leading-relaxed">${message}</p>
                    <button class="px-6 py-2 bg-primary text-white hover:bg-purple-600 rounded-lg transition-colors font-semibold" onclick="this.closest('.fixed').remove()">موافق</button>
                </div>
            `;
            document.getElementById('modalContainer').appendChild(modal);
            
            setTimeout(() => {
                if (modal.parentNode) {
                    modal.remove();
                }
            }, 4000);
        }

        // Custom confirm dialog
        function showConfirmDialog(message, onConfirm) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg max-w-sm w-full mx-4">
                    <p class="text-gray-700 dark:text-gray-300 mb-6 leading-relaxed">${message}</p>
                    <div class="flex justify-end space-x-3 space-x-reverse">
                        <button class="px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors" onclick="this.closest('.fixed').remove()">إلغاء</button>
                        <button class="px-4 py-2 bg-red-500 text-white hover:bg-red-600 rounded transition-colors font-semibold" onclick="this.closest('.fixed').remove(); (${onConfirm})()">تأكيد</button>
                    </div>
                </div>
            `;
            document.getElementById('modalContainer').appendChild(modal);
        }

        // Event listeners
        document.getElementById('generateBtn').addEventListener('click', generateWords);
        document.getElementById('pauseBtn').addEventListener('click', togglePause);
        document.getElementById('saveCollectionBtn').addEventListener('click', saveCurrentCollection);
        document.getElementById('downloadBtn').addEventListener('click', downloadResults);
        document.getElementById('clearAllBtn').addEventListener('click', clearAllCollections);
        document.getElementById('exportAllBtn').addEventListener('click', exportAllCollections);
        document.getElementById('maxLength').addEventListener('change', updateQuickStats);

        // Initialize
        document.addEventListener('DOMContentLoaded', async () => {
            await initDB();
            await loadCollections(); // Load and update stats
            updateQuickStats();
            document.getElementById('progressInfo').textContent = 'اختر الإعدادات واضغط "بدء التوليد" للبدء';
        });

        // Prevent zoom on iOS
        document.addEventListener('gesturestart', function (e) {
            e.preventDefault();
        });

        // Add service worker for PWA functionality
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', async () => {
                try {
                    const swCode = `
                        const CACHE_NAME = 'arabic-words-mohammed-albadli-v2';
                        const urlsToCache = [
                            './',
                            'https://cdn.tailwindcss.com',
                            'https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@400;500;600;700&display=swap'
                        ];

                        self.addEventListener('install', event => {
                            event.waitUntil(
                                caches.open(CACHE_NAME)
                                    .then(cache => cache.addAll(urlsToCache))
                            );
                        });

                        self.addEventListener('fetch', event => {
                            event.respondWith(
                                caches.match(event.request)
                                    .then(response => {
                                        if (response) {
                                            return response;
                                        }
                                        return fetch(event.request);
                                    })
                            );
                        });
                    `;
                    
                    const blob = new Blob([swCode], { type: 'application/javascript' });
                    const swUrl = URL.createObjectURL(blob);
                    
                    await navigator.serviceWorker.register(swUrl);
                    console.log('Service Worker registered successfully');
                } catch (error) {
                    console.log('Service Worker registration failed:', error);
                }
            });
        }
    </script>
</body>
</html>
